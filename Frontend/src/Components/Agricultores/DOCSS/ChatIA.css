@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap');

:root{
  --bg:#eaf1f9;
  --bg2:#f4f8ff;
  --panel:#ffffff;
  --panel-2:#f7fbff;
  --border:#d9e5f5;
  --text:#0f172a;
  --muted:#55627a;
  --brand:#2b6cff;
  --brand-2:#4ea5ff;
  --brand-soft:#e7f1ff;
  --userBubble:#bfe4ff;
  --userBubble2:#d6ecff;
  --userText:#06223a;
  --aiBubble:#ffffff;
  --navbar-h:70px;
}

*{box-sizing:border-box}
html, body { height:auto; }
body { overflow:auto; }    

.chatia{
  font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:var(--text);
  height:100dvh; 
  display:flex;
  flex-direction:column;
  background:
    radial-gradient(1200px 800px at 0% -20%, rgba(43,108,255,.12), transparent 60%),
    radial-gradient(900px 700px at 120% 0%, rgba(78,165,255,.10), transparent 55%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
  overflow:hidden; 
}

.chatia__layout{
  display:grid;
  grid-template-columns:340px minmax(0,1fr);
  gap:16px;
  padding:16px clamp(12px,3vw,24px);
  height:100%;
  overflow:hidden;
}

.chatia__sidebar{
  height:100%;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  display:flex; flex-direction:column;
  overflow:hidden;
}

.chatia__sidebarIntro{
  padding:18px 16px 12px;
  background:linear-gradient(180deg,#f7fbff,#ffffff);
  border-bottom:1px solid var(--border);
}
.intro__badge{
  display:inline-block;
  padding:6px 10px;
  border-radius:999px;
  font-weight:800;
  font-size:12px;
  color:#0b2b6a;
  background:#e9f1ff;
  border:1px solid #d7e7ff;
}
.intro__title{
  margin:10px 0 6px;
  font-size:14px;
  color:#1b3f7a;
  font-weight:800;
  letter-spacing:.2px;
  text-transform:uppercase;
}
.intro__desc{
  margin:0;
  color:var(--muted);
  font-size:12.5px;
  line-height:1.35;
}

.chatia__sidebarHead{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 12px;
  border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);
  background:#fbfdff;
}
.hist__title{margin:0; font-size:14px; font-weight:800; color:#0c2b60}
.hist__new{
  height:32px; padding:0 10px; border-radius:10px;
  border:1px solid var(--border);
  background:#ffffff; color:var(--brand); font-weight:700; cursor:pointer;
}

.chatia__convos{
  padding:12px;
  display:grid; gap:10px; align-content:start;
  overflow:auto;             /* <- ahora hace scroll */
  overscroll-behavior:contain;
  -webkit-overflow-scrolling:touch;
}
.chatia__convoItem{
  display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center;
  padding:12px 12px;
  border:1px solid var(--border); background:#ffffff;
  border-radius:14px; cursor:pointer; transition:.18s ease;
}
.chatia__convoItem:hover{transform:translateY(-1px); box-shadow:0 8px 16px rgba(43,108,255,.10)}
.chatia__convoItem.is-active{border-color:var(--brand); box-shadow:0 0 0 2px rgba(43,108,255,.12) inset}
.chatia__convoTitle{font-weight:700; line-height:1.2; font-size:14.5px}
.chatia__convoDate{color:var(--muted); font-size:11.5px}
.chatia__deleteBtn{
  background:#fff; border:1px solid var(--border); border-radius:10px; padding:8px 10px; cursor:pointer; color:var(--text)
}
.chatia__deleteBtn:hover{background:var(--panel-2)}
.chatia__empty{color:var(--muted); text-align:center; padding:16px}
.chatia__empty.small{padding:10px; font-size:13px}

.chatia__main{
  height:100%;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  display:flex; flex-direction:column;
  overflow:hidden; 
}

.chatia__headerMain{
  display:flex; align-items:center; justify-content:space-between;
  border-bottom:1px solid var(--border);
  padding:14px 16px;
  background:linear-gradient(180deg, #f7fbff, #ffffff);
}
.chatia__current{font-weight:800; font-size:18px}
.chatia__headerBtn{
  height:36px; padding:0 12px; border-radius:10px; font-weight:700;
  border:1px solid var(--border);
  background:#ffffff;
  color:var(--brand); cursor:pointer; transition:.18s ease, transform .06s ease;
}
.chatia__headerBtn:hover{ transform:translateY(-1px); box-shadow:0 10px 20px rgba(43,108,255,.15) }

.chatia__thread{
  position:relative;
  padding:14px 16px 8px;
  display:flex; flex-direction:column; gap:10px;
  flex:1;
  overflow:auto;                
  overscroll-behavior:contain;
  -webkit-overflow-scrolling:touch;
  scroll-behavior:smooth;        
  background:
    radial-gradient(900px 500px at 100% -10%, rgba(255, 255, 255, 0.1), transparent 60%);
  touch-action:pan-y;            
}

.chatia__placeholder{color:var(--muted); text-align:center; margin-top:8px; font-weight:600}

.bubble{
  max-width:min(78%, 820px);
  padding:10px 12px;
  border-radius:18px;
  border:1px solid #e4eefc;
  background:var(--aiBubble);
  font-size:15px;
  line-height:1.44;
  position:relative;
  box-shadow:0 6px 14px rgba(20,62,114,.06);
  transform:translateY(6px) scale(.98);
  opacity:0;
}
.anim-pop{animation:pop .18s ease-out forwards}
@keyframes pop{to{transform:translateY(0) scale(1); opacity:1}}

.bubble--user{
  margin-left:auto;
  color:var(--userText);
  background:linear-gradient(180deg, var(--userBubble2), var(--userBubble));
  border-color:#b7d8ff;
}
.bubble--user::after{
  content:"";
  position:absolute; right:-6px; bottom:10px;
  width:12px; height:12px; transform:rotate(45deg);
  background:linear-gradient(180deg, var(--userBubble2), var(--userBubble));
  border-right:1px solid #b7d8ff;
  border-bottom:1px solid #b7d8ff;
}
.bubble--ai{
  background:#ffffff;
  border-color:#e4eefc;
}
.bubble--ai::after{
  content:"";
  position:absolute; left:-6px; bottom:10px;
  width:12px; height:12px; transform:rotate(45deg);
  background:#ffffff;
  border-left:1px solid #e4eefc;
  border-bottom:1px solid #e4eefc;
}

.bubble__head{display:flex; align-items:center; gap:8px; margin:0 0 6px}
.bubble__avatar{
  display:inline-grid; place-items:center;
  width:26px; height:26px; border-radius:50%;
  background:#eef6ff; border:1px solid #d9e5f5; font-size:15px; color:#1b3f7a;
}
.bubble__who{font-weight:700; color:#1b3f7a}
.bubble__copy{
  margin-left:auto; font-size:12px; padding:6px 10px; border-radius:10px;
  border:1px solid var(--border); background:#fff; cursor:pointer; color:var(--brand);
}
.bubble__content{white-space:pre-wrap}
.bubble__content.md{font-size:15px; line-height:1.38; word-break:break-word}
.bubble__content.md > :first-child{margin-top:0 !important}
.bubble__content.md > :last-child{margin-bottom:0 !important}

.md p{ margin: 6px 0 !important; }
.md h1,.md h2,.md h3{ margin: 8px 0 6px !important; line-height: 1.18; font-weight: 800; color:#0c2b60 }
.md h1{ font-size: 20px; }
.md h2{ font-size: 18px; }
.md h3{ font-size: 16px; }
.md ul,.md ol{ list-style-position: inside; margin: 6px 0 !important; padding-left: 0 !important; }
.md li{ margin: 4px 0 !important; line-height: 1.34; }
.md li > p{ display: inline; margin: 0 !important; }
.md ol li::marker{ content: counter(list-item) ") "; color:#2b6cff }
.md blockquote{
  border-left: 4px solid #b8d7ff;
  background: #eaf3ff;
  padding: 8px 12px;
  border-radius: 12px;
  color: #153464;
  margin: 10px 0 !important;
}
.md code{
  background: #f1f6ff;
  border: 1px solid #e1ecff;
  border-radius: 6px;
  padding: 0 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: .92em;
  color:#0f2b57;
}
.md pre{
  position: relative;
  background: #0f172a;
  color: #e2ecff;
  border-radius: 12px;
  padding: 12px 14px;
  overflow: auto;
  border: 1px solid #0b1225;
  margin: 10px 0 !important;
}

.chatia__composer{
  display:grid; grid-template-columns:1fr auto; gap:10px;
  padding:12px; border-top:1px solid var(--border);
  background:#fbfdff;
}

.chatia__inputWrap{
  position:relative;
  border-radius:14px;
  background:#ffffff;
  border:1px solid var(--border);
}
.chatia__textarea{
  width:100%; border-radius:14px; border:0; outline:0;
  padding:14px 14px 26px; resize:none; min-height:52px; max-height:180px; overflow-y:auto;
  font:inherit; font-size:15px; color:var(--text);
  background:transparent;
}
.chatia__hint{
  position:absolute; left:12px; bottom:8px; font-size:12px; color:var(--muted);
  transition: .18s ease; opacity:.9;
}
.chatia__hint.is-hidden{opacity:0; transform:translateY(4px)}
.chatia__send{
  min-width:120px; height:52px; border-radius:14px;
  background:linear-gradient(180deg, var(--brand-2), var(--brand));
  border:0; color:#fff; font-weight:800; cursor:pointer; transition:.18s ease;
  display:inline-flex; align-items:center; gap:10px; justify-content:center;
  box-shadow:0 10px 24px rgba(43,108,255,.25);
}
.chatia__send:disabled{opacity:.6; cursor:not-allowed; box-shadow:none}
.chatia__sendIcon{display:inline-grid; place-items:center; width:26px; height:26px; border-radius:999px; background:rgba(255,255,255,.16); font-size:14px}
.chatia__send:hover:not(:disabled){transform:translateY(-1px)}
.chatia__send:active:not(:disabled){transform:translateY(0)}

.chatia__error{
  color:#9f1239; background:#ffe8ee; border:1px solid #ffcad6;
  border-radius:12px; padding:8px 12px; margin:8px 12px 0;
}


.empty__img{

  max-width:75%;
  border-radius:16px;
  display:block;
  margin:10px auto 12px;
  border:none;           
  background:#fff;
  box-shadow:none;
}
.chatia__emptyState{
  margin:auto;
  text-align:center;
  color:#1e2f55;
}
.empty__title{font-size:20px; font-weight:800; margin-bottom:6px}
.empty__hint{color:var(--muted); font-size:13px}

.typing{display:inline-flex; align-items:center; gap:6px; padding:2px 2px}
.dot{
  width:8px; height:8px; border-radius:999px;
  background:#a2c4ff; display:inline-block;
  animation:blink 1s infinite ease-in-out;
}
.dot:nth-child(2){animation-delay:.15s}
.dot:nth-child(3){animation-delay:.3s}
@keyframes blink{0%,80%,100%{opacity:.2; transform:translateY(0)}40%{opacity:1; transform:translateY(-2px)}}

@media (max-width:980px){
  .chatia__layout{grid-template-columns:1fr}
  .chatia__sidebar{
    position:fixed; left:0; top:0; bottom:0;
    width:min(92vw,360px);
    transform:translateX(-110%); transition:transform .25s ease; z-index:5; border-radius:0 16px 16px 0;
    height:auto;
  }
  .chatia__layout.is-open .chatia__sidebar{transform:translateX(0)}
  .bubble{max-width:88%}
}

.toast {
  position: fixed;
  right: 20px;
  bottom: 20px;
  max-width: min(92vw, 420px);
  display: inline-flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 14px;
  background: #0f172a;
  color: #eaf1ff;
  z-index: 9999;
  transform: translateY(10px);
  opacity: 0;
  animation: toast-in .18s ease-out forwards;
  border: 1px solid #0b1225;
  box-shadow:0 12px 26px rgba(15,23,42,.35);
}
@keyframes toast-in { to { transform: translateY(0); opacity: 1; } }
.toast--success { background: #0b4b2f; }
.toast--error   { background: #6b1221; }
.toast--loading { background: #0b1225; }
.toast__msg { line-height: 1.25; font-size: 14px; }
.toast__close { margin-left:6px; border:0; background:transparent; color:inherit; font-size:16px; line-height:1; cursor:pointer; opacity:.9; }
.toast__close:hover{ opacity:1; }
.toast__spinner { width:18px; height:18px; border-radius:999px; border:2px solid #9CA3AF; border-top-color:transparent; display:inline-block; animation: spin .8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.cdlg__backdrop{
  position: fixed; inset: 0;
  background: rgba(15, 23, 42, .35);
  display: grid; place-items: center;
  z-index: 10000;
}
.cdlg{
  width: min(92vw, 420px);
  background: #ffffff;
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(15,23,42,.20);
  padding: 16px;
}
.cdlg__title{ margin: 0 0 8px; font-weight: 800; font-size: 18px; }
.cdlg__msg{ margin: 0 0 14px; color: var(--muted); line-height: 1.35; }
.cdlg__actions{ display: flex; justify-content: flex-end; gap: 10px; }
.cdlg__btn{
  height: 40px; padding: 0 14px;
  border-radius: 10px; cursor: pointer; font-weight: 700;
  border: 1px solid var(--border);
  background:#ffffff;
  color: var(--brand);
}
.cdlg__btn--primary{
  background: linear-gradient(180deg, var(--brand-2), var(--brand)); color: #fff; border: 0;
  box-shadow: 0 8px 18px rgba(43,108,255,.25);
}
/* ---- FIX SCROLL EN GRID/FLEX ---- */
.chatia__layout > * { min-height: 0; min-width: 0; }     /* sidebar y main */
.chatia__main { min-height: 0; }                       
.chatia__thread { min-height: 0; overflow: auto; }        /* ya lo tienes, reforzamos min-height */
.chatia__sidebar { min-height: 0; }
.chatia__convos { min-height: 0; overflow: auto; }        /* lista del historial con scroll fijo */


@supports (height: 100svh) {
  .chatia { height: 100svh; }
}

