@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

:root{
  --bg:#f5f7fb;
  --panel:#ffffff;
  --border:#e7eaf3;
  --text:#1d2233;
  --muted:#6c748a;
  --brand:#2b6cff;         
  --userBubble:#e7f1ff;
  --aiBubble:#fff;
  --dangerBg:#fde7ea;
  --dangerBorder:#f3c1c7;
  --navbar-h:64px;


  --nav-dark-1:#0d2c47;
  --nav-dark-2:#153f63;
}


.chatia{
  font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:var(--text);
  background:var(--bg);
  min-height:100%;
  display:flex; 
  flex-direction:column;
}


.chatia__top{
  position: static;                 
  z-index: 3;
  display:flex; 
  align-items:center; 
  justify-content:space-between; 
  gap:12px;
  padding:14px clamp(12px,3vw,24px);
  background: linear-gradient(90deg, var(--nav-dark-1) 0%, var(--nav-dark-2) 100%) !important;
  color:#fff;
  box-shadow:0 4px 16px rgba(0,0,0,.08);
  border-bottom:1px solid rgba(255,255,255,.08);
}
@media (max-width: 980px){
  .chatia__top{ position: sticky; top: 0; }
}

.chatia__brand{display:flex; align-items:center; gap:12px;}
.chatia__logo{
  display:grid; place-items:center; width:36px; height:36px;
  border-radius:10px; background:rgba(255,255,255,.18); font-size:20px;
}
.chatia__title{margin:0; font-weight:700; letter-spacing:.2px;}
.chatia__subtitle{margin:0; opacity:.9; font-size:12px;}


.chatia__ghostBtn,.chatia__ghostSmall,.chatia__burger{
  background:rgba(255,255,255,.12);
  color:#fff; border:1px solid rgba(255,255,255,.28);
  padding:8px 12px; border-radius:12px; cursor:pointer; transition:.2s ease;
}
.chatia__ghostSmall{font-size:12px; padding:6px 10px;}
.chatia__ghostBtn:hover,.chatia__ghostSmall:hover,.chatia__burger:hover{background:rgba(255,255,255,.2);}
.chatia__burger{display:none}


.chatia__layout{
  display:grid;
  grid-template-columns:260px minmax(0,1fr);
  gap:18px;
  padding:18px clamp(12px,3vw,24px);
  align-items:start;
}


.chatia__sidebar{
  position:sticky;
  top:var(--navbar-h);
  height:calc(100vh - var(--navbar-h) - 24px);
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow:0 6px 20px rgba(34,35,58,.06);
  overflow:hidden;            
  display:flex; flex-direction:column;
}
.chatia__sidebarHead{
  position:sticky; top:0; z-index:1;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 12px;
  border-bottom:1px solid rgba(255,255,255,.12);
  background: linear-gradient(90deg, var(--nav-dark-1) 0%, var(--nav-dark-2) 100%) !important;
  color:#fff;
  border-top-left-radius: 14px;
  border-top-right-radius: 14px;
}
.chatia__sidebarHead .chatia__ghostSmall{
  background: rgba(255,255,255,.12);
  color:#fff;
  border-color: rgba(255,255,255,.28);
}
.chatia__sidebarHead .chatia__ghostSmall:hover{
  background: rgba(255,255,255,.2);
}

.chatia__convos{padding:8px; display:grid; gap:8px; overflow:auto;}
.chatia__convoItem{
  display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center;
  padding:10px 12px;
  border:1px solid var(--border); background:#fff;
  border-radius:12px; cursor:pointer; transition:.18s ease;
}
.chatia__convoItem:hover{transform:translateY(-1px); box-shadow:0 4px 12px rgba(0,0,0,.06);}
.chatia__convoItem.is-active{border-color:var(--brand); box-shadow:0 0 0 2px rgba(43,108,255,.15) inset;}
.chatia__convoTitle{font-weight:600; line-height:1.2; font-size:14.5px;}
.chatia__convoDate{color:var(--muted); font-size:11.5px;}
.chatia__deleteBtn{background:#fff; border:1px solid var(--border); border-radius:10px; padding:6px 8px; cursor:pointer;}
.chatia__empty{color:var(--muted); text-align:center; padding:16px;}
.chatia__empty.small{padding:10px; font-size:13px;}

/* ===== Main ===== */
.chatia__main{
  min-height:calc(100vh - var(--navbar-h) - 24px);
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:0 8px 24px rgba(34,35,58,.06);
  display:flex; flex-direction:column;
}
.chatia__headerMain{
  border-bottom:1px solid rgba(255,255,255,.12);
  padding:14px 16px;
  background: linear-gradient(90deg, var(--nav-dark-1) 0%, var(--nav-dark-2) 100%) !important;
  color:#fff;
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
}
.chatia__current{font-weight:700; font-size:18px; color:#fff;}


.chatia__thread{
  position:relative;
  padding:12px 16px 6px;
  display:flex; flex-direction:column; gap:10px;
  overflow:auto; flex:1; background:#fff;
}
.chatia__thread::before{
  content:""; position:sticky; top:0; left:0; right:0; height:16px; z-index:1;
  background:linear-gradient(to bottom, rgba(255,255,255,.95), rgba(255,255,255,0));
  pointer-events:none;
}
.chatia__placeholder{color:var(--muted); text-align:center; margin-top:8px;}


.bubble{
  max-width:72%;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--aiBubble);
  box-shadow:0 2px 8px rgba(34,35,58,.05);
  font-size:15px;
}
.bubble--user{
  margin-left:auto;
  background:var(--userBubble);
  border-color:#cfe1ff;
}
.bubble--ai{background:#ffffff; border-color:var(--border);}
.bubble__content{white-space:pre-wrap; line-height:1.35;}

.bubble__head{display:flex; align-items:center; gap:8px; margin:0 0 6px;}
.bubble__avatar{
  display:inline-grid; place-items:center;
  width:28px; height:28px; border-radius:50%;
  background:#eef4ff; border:1px solid #dbe6ff; font-size:16px;
}
.bubble__who{font-weight:600; color:#14213d;}
.bubble__copy{
  margin-left:auto; font-size:12px; padding:6px 10px; border-radius:8px;
  border:1px solid var(--border); background:#fff; cursor:pointer;
}
.bubble__copy:hover{background:#f6f8ff;}


.chatia__composer{
  display:grid; grid-template-columns:1fr auto; gap:10px;
  padding:12px; border-top:1px solid var(--border); background:#fbfcff;
}
.chatia__textarea{
  width:100%; border-radius:12px; border:1px solid var(--border);
  padding:12px 14px; resize:none; min-height:46px; max-height:160px; overflow-y:auto;
  font:inherit; font-size:15px;
}
.chatia__send{
  min-width:112px; height:46px; border-radius:12px;
  background:var(--brand); border:0; color:#fff; font-weight:700; cursor:pointer; transition:.18s ease;
}
.chatia__send:disabled{opacity:.6; cursor:not-allowed;}


.chatia__error{
  color:#b00020; background:var(--dangerBg); border:1px solid var(--dangerBorder);
  border-radius:12px; padding:8px 12px; margin:8px 12px 0;
}


.bubble__content.md{font-size:15px; line-height:1.32; word-break:break-word;}
.bubble__content.md > :first-child{margin-top:0 !important;}
.bubble__content.md > :last-child{margin-bottom:0 !important;}

.md p{ margin: 4px 0 !important; }

.md h1,.md h2,.md h3{
  margin: 8px 0 6px !important;
  line-height: 1.18;
  font-weight: 700;
}
.md h1{ font-size: 20px; }
.md h2{ font-size: 18px; }
.md h3{ font-size: 16px; }

.md ul,.md ol{
  list-style-position: inside;
  margin: 4px 0 !important;
  padding-left: 0 !important;  
}

.md li{ margin: 2px 0 !important; line-height: 1.32; }
.md li > p{ display: inline; margin: 0 !important; }
.md ol li::marker{ content: counter(list-item) ") "; }

.md blockquote{
  border-left: 4px solid #d7e3ff;
  background: #f6f8ff;
  padding: 6px 10px;
  border-radius: 10px;
  color: #2b3a5a;
  margin: 8px 0 !important;
}

.md code{
  background: #f1f4fb;
  border: 1px solid #e5e9f3;
  border-radius: 6px;
  padding: 0 4px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: .92em;
}

.md pre{
  position: relative;
  background: #0f172a;
  color: #e2e8f0;
  border-radius: 10px;
  padding: 10px 12px;
  overflow: auto;
  border: 1px solid #0b1225;
  margin: 8px 0 !important;
}

@media (max-width:980px){
  .chatia__layout{grid-template-columns:1fr;}
  .chatia__sidebar{
    position:fixed; left:0; top:var(--navbar-h); bottom:0;
    width:min(92vw,340px);
    transform:translateX(-110%); transition:transform .25s ease; z-index:5; border-radius:0 16px 16px 0;
    height:auto;
  }
  .chatia__layout.is-open .chatia__sidebar{transform:translateX(0);}
  .chatia__burger{display:inline-block;}
  .bubble{max-width:86%;}
}


.toast {
  position: fixed;
  right: 20px;
  bottom: 20px;
  max-width: min(92vw, 420px);
  display: inline-flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
  background: #111827;
  color: #F9FAFB;
  z-index: 9999;
  transform: translateY(10px);
  opacity: 0;
  animation: toast-in .18s ease-out forwards;
  border: 1px solid rgba(255,255,255,.08);
}
@keyframes toast-in { to { transform: translateY(0); opacity: 1; } }
.toast--success { background: #065f46; }
.toast--error   { background: #7f1d1d; }
.toast--loading { background: #1f2937; }
.toast__msg { line-height: 1.25; font-size: 14px; }
.toast__close { margin-left:6px; border:0; background:transparent; color:inherit; font-size:16px; line-height:1; cursor:pointer; opacity:.9; }
.toast__close:hover{ opacity:1; }
.toast__spinner { width:18px; height:18px; border-radius:999px; border:2px solid #9CA3AF; border-top-color:transparent; display:inline-block; animation: spin .8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
@media (prefers-reduced-motion: reduce){ .toast, .toast__spinner { animation: none; } }


.cdlg__backdrop{
  position: fixed; inset: 0;
  background: rgba(3, 7, 18, .55);
  backdrop-filter: blur(2px);
  display: grid; place-items: center;
  z-index: 10000;
}
.cdlg{
  width: min(92vw, 420px);
  background: var(--panel);
  border: 1px solid var(--border);
  color: var(--text);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
  padding: 16px;
  animation: cdlg-in .18s ease-out both;
}
@keyframes cdlg-in { from { transform: translateY(10px); opacity: 0; } to { transform: none; opacity: 1; } }
.cdlg__title{ margin: 0 0 8px; font-weight: 700; font-size: 18px; }
.cdlg__msg{ margin: 0 0 14px; color: var(--muted); line-height: 1.35; }
.cdlg__actions{ display: flex; justify-content: flex-end; gap: 10px; }
.cdlg__btn{
  height: 40px; padding: 0 14px;
  border-radius: 10px; cursor: pointer; font-weight: 600;
  border: 1px solid var(--border);
  background: #fff; color: var(--text);
}
.cdlg__btn--ghost{ background: #fff; }
.cdlg__btn--primary{
  background: var(--brand); color: #fff; border: 0;
  box-shadow: 0 4px 10px rgba(43,108,255,.25);
}
.cdlg__btn--primary:disabled{ opacity:.7; }



.chatia__headerMain{
  display:flex;
  align-items:center;
  justify-content:space-between;
}


.chatia__headerBtn{
  height:38px;
  padding:0 14px;
  border-radius:12px;
  font-weight:700;
  border:1px solid rgba(255,255,255,.28);
  background:rgba(255,255,255,.12);
  color:#fff;
  cursor:pointer;
  transition:background .18s ease, transform .06s ease;
}
.chatia__headerBtn:hover{ background:rgba(255,255,255,.2); }
.chatia__headerBtn:active{ transform:translateY(1px); }
